{"version":3,"sources":["webpack:///./src/templates/index.tsx"],"names":["moment","locale","initGA","initAmplitude","sendAmplitudeEvent","IndexPage","pageContext","slug","stateName","date","today","yesterday","console","log","todayDate","format","differenceConfirmed","confirmed","differenceDeaths","deaths","differenceSuspects","suspects","differenceNegatives","negatives","differenceTests","tests","differenceConfirmedText","Math","abs","differenceDeathsText","differenceSuspectsText","differenceNegativesText","differenceTestsText","sharingUrl","sharingMessage","className","title","description","rounded","href","target","rel","onClick","icon","faWhatsapp","size","faFacebookF","to"],"mappings":"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","file":"component---src-templates-index-tsx-9b6e14cbb30aa5daf2e4.js","sourcesContent":["import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faWhatsapp, faFacebookF } from '@fortawesome/free-brands-svg-icons';\nimport { Link } from 'gatsby';\nimport moment from 'moment-timezone';\nimport React from 'react';\nimport 'react-svg-map/lib/index.css';\nimport 'moment/locale/es';\n\n// @ts-ignore\nimport SEO from '../components/seo';\nimport { Stat } from './../components/Stat';\nimport { initGA, initAmplitude, sendAmplitudeEvent } from './../utils/analytics';\n\nmoment.locale('es');\ninitGA();\ninitAmplitude();\nsendAmplitudeEvent('INIT');\n\ninterface DailyData {\n  date: string;\n  confirmed: number;\n  deaths: number;\n  suspects: number;\n  negatives: number;\n  tests?: number;\n}\n\ninterface Props {\n  pageContext: {\n    slug: string;\n    stateName: string;\n    today: DailyData;\n    yesterday: DailyData;\n    date: string;\n  };\n}\n\nconst IndexPage = ({ pageContext }: Props) => {\n  const { slug, stateName, date, today, yesterday } = pageContext;\n  console.log('start', slug, stateName, today, yesterday, pageContext);\n\n  const todayDate = moment(date).format('DD [de] MMMM[,] YYYY');\n  const differenceConfirmed = today.confirmed - yesterday.confirmed;\n  const differenceDeaths = today.deaths - yesterday.deaths;\n  const differenceSuspects = today.suspects - yesterday.suspects;\n  const differenceNegatives = today.negatives - yesterday.negatives;\n  const differenceTests = today.tests && yesterday.tests ? today.tests - yesterday.tests : 0;\n\n  const differenceConfirmedText = `${Math.abs(differenceConfirmed)} ${\n    differenceConfirmed >= 0 ? 'más' : 'menos'\n  } que ayer`;\n  const differenceDeathsText = `${Math.abs(differenceDeaths)} ${\n    differenceDeaths >= 0 ? 'más' : 'menos'\n  } que ayer`;\n  const differenceSuspectsText = `${Math.abs(differenceSuspects)} ${\n    differenceSuspects >= 0 ? 'más' : 'menos'\n  } que ayer`;\n  const differenceNegativesText = `${Math.abs(differenceNegatives)} ${\n    differenceNegatives >= 0 ? 'más' : 'menos'\n  } que ayer`;\n  const differenceTestsText =\n    today.tests && yesterday.tests\n      ? `${Math.abs(differenceTests)} ${differenceTests >= 0 ? 'más' : 'menos'} que ayer`\n      : '';\n\n  const sharingUrl = `https://desdecasa.today/${slug === '/' ? '' : slug}`;\n  const sharingMessage = `*${todayDate} | ${stateName}:*%0A\n- ${today.confirmed} casos confirmados (${differenceConfirmedText})%0A\n- ${today.deaths} defunciones (${differenceDeathsText})%0A\n- ${today.suspects} casos sospechosos (${differenceSuspectsText})%0A\n- ${today.negatives} casos negativos (${differenceNegativesText})%0A\n${today.tests ? `- ${today.tests} personas estudiadas (${differenceTestsText})%0A` : ''}\n\n%0A%23QuedateEnCasa 🏠\n%0AInformación diaria y detallada en ${sharingUrl}`;\n\n  return (\n    <div className='h-full bg-gray-200'>\n      <SEO\n        title={todayDate}\n        description={`${pageContext.stateName}: ${today.confirmed} casos confirmados (${differenceConfirmedText}). ${today.deaths} defunciones (${differenceDeathsText}).`}\n      />\n      <div className='w-screen flex flex-col justify-center items-center'>\n        <div className='h-9/10 w-10/12 sm:w-3/5 lg:w-2/5 mt-5 mb-5'>\n          <h1 className='text-2xl sm:text-4xl md:text-5xl text-center leading-6 sm:leading-none font-extrabold text-blue-600 mb-3'>\n            COVID-19 <span className='text-gray-900'>en {pageContext.stateName}</span>\n          </h1>\n          <p className='text-center text-gray-600 mb-4 text-base sm:text-2xl'>\n            Estadísticas al día {todayDate}\n          </p>\n          <div className='mb-4'>\n            <Stat\n              title='Casos confirmados'\n              today={today.confirmed}\n              yesterday={yesterday.confirmed}\n              rounded='t'\n            />\n            <Stat title='Defunciones' today={today.deaths} yesterday={yesterday.deaths} />\n            <Stat title='Casos sospechosos' today={today.suspects} yesterday={yesterday.suspects} />\n            <Stat title='Casos negativos' today={today.negatives} yesterday={yesterday.negatives} />\n          </div>\n\n          <div className='flex flex-col'>\n            <p className='text-sm text-center sm:text-sm font-light text-gray-600'>\n              Comparte esta información\n            </p>\n            <div className='flex w-32 mx-auto justify-around'>\n              <a\n                href={`https://wa.me/?text=${sharingMessage}`}\n                target='_blank'\n                rel='noopener noreferrer'\n                className='underline'\n                onClick={() => sendAmplitudeEvent('SHARE_VIA_WHATSAPP')}\n              >\n                <FontAwesomeIcon icon={faWhatsapp} size='lg' className='text-blue-600' />\n              </a>\n              <a\n                href={'http://www.facebook.com/sharer/sharer.php?u=https://desdecasa.today'}\n                target='_blank'\n                rel='noopener noreferrer'\n                className='underline'\n                onClick={() => sendAmplitudeEvent('SHARE_VIA_FACEBOOK')}\n              >\n                <FontAwesomeIcon icon={faFacebookF} size='lg' className='text-blue-600' />\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <p className='text-sm text-center sm:text-sm font-light text-gray-600 pb-6'>\n        <Link\n          to='/'\n          className='underline'\n          onClick={() => {\n            sendAmplitudeEvent('GO_TO_HOME');\n          }}\n        >\n          Información nacional\n        </Link>\n      </p>\n      <p className='text-sm text-center sm:text-sm font-light text-gray-600 pb-6'>\n        Fuente:{' '}\n        <a\n          href='https://www.gob.mx/salud/documentos/coronavirus-covid-19-comunicado-tecnico-diario-238449'\n          target='_blank'\n          rel='noopener noreferrer'\n          className='underline'\n          onClick={() => sendAmplitudeEvent('OPEN_SOURCE')}\n        >\n          Gobierno de México\n        </a>\n      </p>\n    </div>\n  );\n};\n\nexport default IndexPage;\n"],"sourceRoot":""}